$schema: "http://json-schema.org/draft-07/schema#"
$id: "https://softwareologists.tech/qa/flow.schema.yaml"
title: "QA Helper Flow"
description: |
  Defines the structure of a QA Helper flow file used to record and
  replay application interactions.
type: object
required:
  - version
  - appVersion
  - emulator
  - steps
properties:
  version:
    type: string
    description: Version of the flow format.
  appVersion:
    type: string
    description: Version of the application under test.
  emulator:
    type: object
    description: Recorded emulator data.
    properties:
      http:
        type: object
        description: Captured HTTP interactions.
        properties:
          interactions:
            type: array
            description: Sequence of HTTP calls.
            items:
              type: object
              required: [method, path]
              properties:
                method:
                  type: string
                path:
                  type: string
                headers:
                  type: object
                  additionalProperties:
                    type: string
                body:
                  type: string
                  nullable: true
      file:
        type: object
        description: Captured file system events.
        properties:
          events:
            type: array
            description: Chronological file events.
            items:
              type: object
              required: [type, path, timestamp]
              properties:
                type:
                  type: string
                  enum: [CREATE, MODIFY, DELETE, MOVE]
                path:
                  type: string
                timestamp:
                  type: string
                  format: date-time
    required:
      - http
      - file
  steps:
    type: array
    description: Ordered steps performed during the flow.
    items:
      type: object
      required: [id, description]
      properties:
        id:
          type: string
        description:
          type: string
